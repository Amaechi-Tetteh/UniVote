(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[600],{79214:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tickets/show",function(){return n(35219)}])},35219:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ne}});var r=n(34051),a=n.n(r),o=n(85893),s=n(67294),i=n(52256),u=n(80967),c=n(65927),p=n(18005),l=n(82509),d=n(90933),f=n(68156),y=n(59077),m=n(13442),h=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_socialGroupFactory","type":"address"}],"name":"setOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newContract","type":"address"}],"name":"setContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address[]","name":"account","type":"address[]"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"batchBurn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address[]","name":"to","type":"address[]"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"batchMint","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),b=new m.Z.eth.Contract(JSON.parse(JSON.stringify(h.Mt)),"0xBFBa5E18ba93174A2387d9A855B61811B37D65AA"),v=n(96215),w=n(5917);function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n,r,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void n(c)}i.done?t(u):Promise.resolve(u).then(r,a)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){j(o,r,a,s,i,"next",e)}function i(e){j(o,r,a,s,i,"throw",e)}s(void 0)}))}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return!t||"object"!==P(t)&&"function"!==typeof t?x(e):t}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var a=_(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return k(this,n)}}var Z=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(c,e);var t,n,r,s=S(c);function c(){var e;g(this,c),R(x(e=s.apply(this,arguments)),"state",{value:"",errorMessage:"",loading:!1,balance:""});var t=x(e);return R(x(e),"onSubmit",function(){var e=T(a().mark((function e(n){var r,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=b,t.setState({loading:!0,errorMessage:""}),e.prev=3,e.next=6,ethereum.request({method:"eth_accounts"});case 6:return o=e.sent,e.next=9,r.methods.balanceOf(o[0]).call();case 9:s=e.sent,t.setState({balance:s}),v.Router.replaceRoute("/tickets/".concat(t.props.address)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),null==w.accounts[0]?t.setState({errorMessage:"Please Login to Metamask and Refresh The Page!"}):t.setState({errorMessage:e.t0.message});case 17:t.setState({loading:!1,value:""});case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}()),e}return t=c,(n=[{key:"render",value:function(){return(0,o.jsxs)(d.Z,{onSubmit:this.onSubmit,error:!!this.state.errorMessage,children:[(0,o.jsx)(f.Z,{error:!0,header:"Oops!",content:this.state.errorMessage}),(0,o.jsxs)(i.Z,{children:[(0,o.jsx)(y.Z,{children:(0,o.jsx)(y.Z.Value,{children:this.state.balance})}),(0,o.jsx)(u.Z,{primary:!0,loading:this.state.loading,children:"View Your Governance Tokens"})]})]})}}])&&O(t.prototype,n),r&&O(t,r),c}(s.Component),C=n(83544);function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t,n,r,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void n(c)}i.done?t(u):Promise.resolve(u).then(r,a)}function V(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){N(o,r,a,s,i,"next",e)}function i(e){N(o,r,a,s,i,"throw",e)}s(void 0)}))}}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return!t||"object"!==F(t)&&"function"!==typeof t?E(e):t}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var F=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=q(e);if(t){var a=q(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return D(this,n)}}var J=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(i,e);var t,n,r,s=I(i);function i(){var e;B(this,i);var t=E(e=s.apply(this,arguments));G(E(e),"onYesVote",V(a().mark((function e(){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.Z)(t.props.address),e.next=3,ethereum.request({method:"eth_accounts"});case 3:return r=e.sent,e.next=6,n.methods.voteOnReferendum(t.props.id,!0).send({from:r[0]});case 6:v.Router.pushRoute("/tickets/".concat(t.props.address));case 7:case"end":return e.stop()}}),e)}))));var n=E(e);G(E(e),"onNoVote",V(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,l.Z)(n.props.address),e.next=3,ethereum.request({method:"eth_accounts"});case 3:return r=e.sent,e.next=6,t.methods.voteOnReferendum(n.props.id,!1).send({from:r[0]});case 6:v.Router.pushRoute("/tickets/".concat(n.props.address));case 7:case"end":return e.stop()}}),e)}))));var r=E(e);return G(E(e),"closeReferendum",V(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,l.Z)(r.props.address),e.next=3,ethereum.request({method:"eth_accounts"});case 3:return n=e.sent,e.next=6,t.methods.endReferendum(r.props.id).send({from:n[0]});case 6:v.Router.pushRoute("/tickets/".concat(r.props.address));case 7:case"end":return e.stop()}}),e)})))),e}return t=i,(n=[{key:"render",value:function(){var e=c.Z.Row,t=c.Z.Cell,n=this.props,r=n.id,a=n.referendum;return(0,o.jsxs)(e,{disabled:a.complete,children:[(0,o.jsx)(t,{children:r}),(0,o.jsx)(t,{children:a.title}),(0,o.jsx)(t,{children:a.description}),(0,o.jsx)(t,{children:a.yesVotes}),(0,o.jsx)(t,{children:a.noVotes}),(0,o.jsx)(t,{children:a.complete?null:(0,o.jsx)(u.Z,{color:"green",basic:!0,onClick:this.onYesVote,children:"Yes"})}),(0,o.jsx)(t,{children:a.complete?null:(0,o.jsx)(u.Z,{color:"red",basic:!0,onClick:this.onNoVote,children:"No"})}),(0,o.jsx)(t,{children:a.complete?null:(0,o.jsx)(u.Z,{color:"black",basic:!0,onClick:this.closeReferendum,children:"End"})})]})}}])&&A(t.prototype,n),r&&A(t,r),i}(s.Component);n(73014);function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t,n,r,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void n(c)}i.done?t(u):Promise.resolve(u).then(r,a)}function W(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){H(o,r,a,s,i,"next",e)}function i(e){H(o,r,a,s,i,"throw",e)}s(void 0)}))}}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return!t||"object"!==ee(t)&&"function"!==typeof t?L(e):t}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ee=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q(e);if(t){var a=Q(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return U(this,n)}}var ne=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(d,e);var t,n,r,s=te(d);function d(){var e;X(this,d),K(L(e=s.apply(this,arguments)),"state",{account:"",socialGroupNft:""});var t=L(e);return K(L(e),"onSubmit",function(){var e=W(a().mark((function e(n){var r,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),t.setState({loading:!0,errorMessage:""}),r=t.props.address,o=(0,l.Z)(r),e.next=6,ethereum.request({method:"eth_accounts"});case 6:return s=e.sent,e.prev=7,e.next=10,o.methods.mint().send({from:s[0]});case 10:v.Router.pushRoute("/tickets/".concat(t.props.address)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),null==s[0]?t.setState({errorMessage:"Please Login to Metamask and Refresh The Page!"}):t.setState({errorMessage:e.t0.message});case 16:t.setState({loading:!1,value:""});case 17:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(t){return e.apply(this,arguments)}}()),e}return t=d,r=[{key:"getInitialProps",value:function(e){return W(a().mark((function t(){var n,r,o,s,i,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,l.Z)(e.query.address),t.next=3,n.methods.name().call();case 3:return r=t.sent,t.next=6,n.methods.symbol().call();case 6:return o=t.sent,t.next=9,n.methods.getVoters().call();case 9:return s=t.sent.length,t.next=12,n.methods.activeReferendums().call();case 12:return i=t.sent,t.next=15,Promise.all(Array(parseInt(i)).fill().map((function(e,t){return n.methods.referendums(t).call()})));case 15:return u=t.sent,t.abrupt("return",{address:e.query.address.toString(),name:r,owner:o,memberCount:s,referendumCount:i,referendums:u});case 17:case"end":return t.stop()}}),t)})))()}}],(n=[{key:"renderCards",value:function(){var e=this.props,t=e.address,n=e.name,r=e.owner,a=e.memberCount,s=e.referendumCount,u=[{header:"Welcome To ".concat(n," Official Social Group"),description:"Mint a ".concat(n," NFT To Start Voting on Referendums")},{header:t,meta:"Social Group Address",style:{overflowWrap:"break-word"}},{header:r,meta:"The Owner Of This Social Group",description:"Contact ".concat(r," for Support Regarding This Social Group")},{header:a,meta:"Active Member Count",description:"Become a Member By Voting on a Referendum"},{header:s,meta:"Active Referendums",description:"Total Number Of Active Referendums"}];return(0,o.jsx)(i.Z.Group,{items:u})}},{key:"createPage",value:function(){var e=this.props.address;return(0,o.jsx)(v.Link,{route:"/tickets/create/".concat(e),children:(0,o.jsx)("a",{children:(0,o.jsx)(u.Z,{floated:"right",content:"Register New Social Group",icon:"add circle",primary:!0})})})}},{key:"renderReferendums",value:function(){var e=this;return this.props.referendums.map((function(t,n){return(0,o.jsx)(J,{id:n,referendum:t,address:e.props.address},n)}))}},{key:"render",value:function(){var e=c.Z.Header,t=c.Z.Row,n=c.Z.HeaderCell,r=c.Z.Body;return(0,o.jsxs)(C.Z,{children:[(0,o.jsx)("h3",{children:"Tickets Show"}),(0,o.jsxs)(p.Z,{children:[(0,o.jsxs)(p.Z.Row,{children:[(0,o.jsx)(p.Z.Column,{width:10,children:this.renderCards()}),(0,o.jsx)(p.Z.Column,{width:6,children:(0,o.jsx)(Z,{address:this.props.address})})]}),(0,o.jsx)(p.Z.Column,{width:2,children:(0,o.jsx)(u.Z,{secondary:!0,loading:this.state.loading,onClick:this.onSubmit,children:"MINT"})}),(0,o.jsx)(p.Z.Column,{width:6,children:this.createPage(this.props.address)})]}),(0,o.jsxs)(c.Z,{children:[(0,o.jsx)(e,{children:(0,o.jsxs)(t,{children:[(0,o.jsx)(n,{children:"ID"}),(0,o.jsx)(n,{children:"Title"}),(0,o.jsx)(n,{children:"Description"}),(0,o.jsx)(n,{children:"Yes Votes"}),(0,o.jsx)(n,{children:"No Votes"}),(0,o.jsx)(n,{children:"VOTE"}),(0,o.jsx)(n,{}),(0,o.jsx)(n,{children:"END"})]})}),(0,o.jsx)(r,{children:this.renderReferendums()})]})]})}}])&&z(t.prototype,n),r&&z(t,r),d}(s.Component)},45545:function(){},46047:function(){},50303:function(){},1826:function(){}},function(e){e.O(0,[774,482,565,714,467,818,682,222,344,349,625,875,888,179],(function(){return t=79214,e(e.s=t);var t}));var t=e.O();_N_E=t}]);